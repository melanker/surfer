$(function(){SurfInfo.initCity=function(){var e,t,a={},n=this,d=$(".loading");e=function(){var e=$(".weatherCurrent");e.find(".cloudsImg").css("background","url(/styles/img/"+a.weather[0].icon+".png) no-repeat"),e.find(".temp").html(a.main.temp.toPrecision(4)+"&deg"),a.windSpeedKnots=(1.94384*a.wind.speed).toPrecision(4),"Haifa"===SurfInfo.webApp.locationPath||"Nahariya"===SurfInfo.webApp.locationPath?(a.waveHeight=SurfInfo.webApp.charts.haifaData.dataHs[SurfInfo.webApp.charts.haifaData.dataHs.length-1],e.find(".seaTemp").html(parseFloat(SurfInfo.webApp.charts.haifaData.data[SurfInfo.webApp.charts.haifaData.data.length-1].temp)+"&deg")):"Ashdod"===SurfInfo.webApp.locationPath?(a.waveHeight=SurfInfo.webApp.charts.ashdodData.dataHs[SurfInfo.webApp.charts.ashdodData.dataHs.length-1],e.find(".seaTemp").html(parseFloat(SurfInfo.webApp.charts.ashdodData.data[SurfInfo.webApp.charts.ashdodData.data.length-1].temp)+"&deg")):(a.waveHeight=((SurfInfo.webApp.charts.ashdodData.dataHs[SurfInfo.webApp.charts.ashdodData.dataHs.length-1]+SurfInfo.webApp.charts.haifaData.dataHs[SurfInfo.webApp.charts.haifaData.dataHs.length-1])/2).toPrecision(3),e.find(".seaTemp").html(((parseFloat(SurfInfo.webApp.charts.ashdodData.data[SurfInfo.webApp.charts.ashdodData.data.length-1].temp)+parseFloat(SurfInfo.webApp.charts.haifaData.data[SurfInfo.webApp.charts.haifaData.data.length-1].temp))/2).toPrecision(4)+"&deg")),e.find(".waves").text(a.waveHeight+"m"),e.find(".speed").text((1.94384*a.wind.speed).toPrecision(4)+" קשר"),e.find(".direction").css({background:"url(/styles/img/wa-sprite.png) -50px -1040px no-repeat","-webkit-transform":"rotate("+a.wind.deg+"deg)","-moz-transform":"rotate("+a.wind.deg+"deg)","-ms-transform":"rotate("+a.wind.deg+"deg)",transform:"rotate("+a.wind.deg+"deg)"}),e.find(".sunset").text(SurfInfo.getTime(1e3*a.sys.sunset)),e.find(".sunrise").text(SurfInfo.getTime(1e3*a.sys.sunrise)),e.show()},t=function(){var e,t,n="",s="",i=$(".details"),r=$("#imgStat");switch(a.wind.deg>=80&&a.wind.deg<=100?(e="מזרחית",s="רוח מזרחית עלולה להשטיח את הגל"):a.wind.deg>100&&a.wind.deg<170?e="דרומית מזרחית":a.wind.deg>=170&&a.wind.deg<=190?(e="דרומית",s="קחו לתשומת ליבכם שרוח דרומית הינה בעלת השפעה קטנה על הגל"):a.wind.deg>190&&a.wind.deg<260?e="מערבית דרומית":a.wind.deg>=260&&a.wind.deg<=280?e="מערבית":a.wind.deg>280&&a.wind.deg<360?e="מערבית צפונית":a.wind.deg>=360||a.wind.deg>=0&&a.wind.deg<=10?(e="צפונית",s="קחו לתשומת ליבכם שרוח צפונית הינה בעלת השפעה קטנה על הגל"):e="צפונית מזרחית",!0){case a.windSpeedKnots<=7:t="רוח חלשה";break;case a.windSpeedKnots>7&&a.windSpeedKnots<10:t="רוח בינונית";break;case a.windSpeedKnots>=10&&a.windSpeedKnots<13:t="רוח בינונית חזקה";break;case a.windSpeedKnots>=13&&a.windSpeedKnots<16:t="רוח חזקה";break;case a.windSpeedKnots>=16:t="רוח חזקה מאוד"}a.waveHeight>=.8?a.windSpeedKnots<=7?(n="ים חלום. קחו חופש מחלה וצאו לים",r.attr("src","/styles/img/perfectWave.jpg")):a.windSpeedKnots>7&&a.windSpeedKnots<10?(n="הים עובד יופי, צריך עדיין להתחשב בכיוון הרוח ועוצמתה",r.attr("src","/styles/img/regWaves.jpg")):a.windSpeedKnots>10&&a.windSpeedKnots<16?(n="ים למנוסים, יש סיכוי לסחף ומכבסות עדיף חופים סגורים",r.attr("src","/styles/img/forPros.jpg")):(n="לא מומלץ לרדת לים",r.attr("src","/styles/img/chppyWaves.jpg")):a.waveHeight<.8&&a.waveHeight>=.5?a.windSpeedKnots<=7?(n="ים מצויין למתחילים עם לונג בורד",r.attr("src","/styles/img/longboardWave.jpg")):a.windSpeedKnots>7&&a.windSpeedKnots<10?(n="ים סביר, למתחילים עם לונג",r.attr("src","/styles/img/longboardWave.jpg")):(n="לא מומלץ, גל נמוך ורוח יחסית חזקה",r.attr("src","/styles/img/lowCrappyWaves.jpg")):(n="ים לחסקה",r.attr("src","/styles/img/hasake.jpg")),i.find("h1").text(n),i.find("p").text(t+" "+e+"\n"+s),d.hide()};!function(){n.communication.http("http://api.openweathermap.org/data/2.5/weather?q="+SurfInfo.webApp.locationPath+",il&units=metric","GET").then(function(n){d.show(),a=n,e(),t()},function(){SurfInfo.initCity()})}()}});