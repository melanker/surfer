$(function(){var a,t,e,i,r,r,s,h;t={ashdodChart:"#ashdodChart",haifaChart:"#haifaChart",ashdodStatus:".ashdodStatus",haifaStatus:".haifaStatus"},a={charts:{ashdodData:{loadingJq:$(".ashdodLoading"),title:"Ashdod",day:"",data:[]},haifaData:{loadingJq:$(".haifaLoading"),title:"Haifa",day:"",data:[]}}},e=function(e){var i=a.charts[e+"Data"].data.length,r=a.charts[e+"Data"].data;a.charts[e+"Data"].dataHmax=[],a.charts[e+"Data"].dataHs=[],a.charts[e+"Data"].dataTime=[];for(var s=1;i>s;s+=1)a.charts[e+"Data"].dataHmax.push(r[s].hMax),a.charts[e+"Data"].dataHs.push(r[s].hS),a.charts[e+"Data"].dataTime.push(r[s].time);$(t[e+"Chart"]).highcharts({chart:{type:"areaspline"},title:{text:a.charts[e+"Data"].data[0].day+"  "+a.charts[e+"Data"].title||a.charts[e+"Data"].title},xAxis:{categories:a.charts[e+"Data"].dataTime},yAxis:{title:{text:"Height[meter]"}},tooltip:{shared:!0,valueSuffix:" meter"},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.5}},series:[{name:"Wave Max",data:a.charts[e+"Data"].dataHmax},{name:"Wave Significant(High probability)",data:a.charts[e+"Data"].dataHs}]})},i={http:function(a,t){var e=$.Deferred();return $.ajax({url:a,type:t,success:function(a){e.resolve(a)}}),e.promise()}},r=function(){var r,s,h;r=function(a,t){var e=a.find("td"),i={day:t||"",time:e.eq(0).text()||"-",hMax:parseFloat(e.eq(1).text())||"-",hS:parseFloat(e.eq(2).text())||"-",hThird:parseFloat(e.eq(3).text())||"-",direction:e.eq(4).text()||"-",tAv:e.eq(5).text()||"-",tZ:e.eq(6).text()||"-",tP:e.eq(7).text()||"-"};return i},s=function(a){var t=$.Deferred();return i.http(a,"GET").then(function(a){var e=[];$.each($(a).find("table").eq(0).find("tr"),function(t,i){e.push(r($(i),$(a).find("[size='+1']").eq(0).text()))}),t.resolve(e)}),t.promise()},h=function(i,r){var s=$(t[r+"Status"]+" .height"),h=$(t[r+"Status"]+" .time");a.charts[r+"Data"].data=i,e(r),s.text(a.charts[r+"Data"].dataHs[a.charts[r+"Data"].dataHs.length-1]+"m - "+a.charts[r+"Data"].dataHmax[a.charts[r+"Data"].dataHmax.length-1]+"m"),h.text(a.charts[r+"Data"].dataTime[a.charts[r+"Data"].dataTime.length-1]+","+a.charts[r+"Data"].data[0].day),a.charts[r+"Data"].loadingJq.hide()},s("/server/waves_prox.php?place=ashdod").then(function(a){h(a,"ashdod")}),s("/server/waves_prox.php?place=haifa").then(function(a){h(a,"haifa")})},s=function(t){$(t).highcharts({chart:{type:"areaspline"},title:{text:"Average fruit consumption during one week"},legend:{},xAxis:{categories:a.charts[name+"Data"].dataTime,plotBands:[{from:4.5,to:6.5,color:"rgba(68, 170, 213, .2)"}]},yAxis:{title:{text:"Height[meter]"}},tooltip:{shared:!0,valueSuffix:" meter"},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.5}},series:[{name:"Wave Max",data:a.charts[name+"Data"].dataHmax},{name:"Wave Significant(High probability)",data:a.charts[name+"Data"].dataHs}]})},h=function(){a.charts.ashdodData.loadingJq.show(),a.charts.haifaData.loadingJq.show(),r()}()});